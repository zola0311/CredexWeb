<div class="dialogSize">
  <h1 mat-dialog-title>Új munkavállaló hozzáadása</h1>
  <mat-dialog-content class="dialog">
    <div class="dialog-body">
      <form [formGroup]="form">
        <div class="segmentBorder">
          <legend class="legendTitle">
            <mat-label color="primary">Személyes adatok:</mat-label>
          </legend>
          <div class="segment">
            <div>
              <mat-form-field class="field">
                <mat-label>Név*</mat-label>
                <input
                  type="text"
                  matInput
                  formControlName="name"
                  placeholder="Pl: Teszt Ernő"
                />
              </mat-form-field>
              <div class="field" *ngIf="getControl.name.touched">
                <p *ngIf="getControl.name.errors?.required" class="errorLabel">
                  Mező kitöltése kötelező.
                </p>
              </div>
            </div>
            <div>
              <mat-form-field class="field">
                <mat-label>Születési név*</mat-label>
                <input
                  type="text"
                  matInput
                  formControlName="birthName"
                  placeholder="Pl: Teszt Ernő"
                />
              </mat-form-field>
              <div class="field" *ngIf="getControl.birthName.touched">
                <p
                  *ngIf="getControl.birthName.errors?.required"
                  class="errorLabel"
                >
                  Mező kitöltése kötelező.
                </p>
              </div>
            </div>
            <div>
              <mat-form-field class="field">
                <mat-label>Telefonszám*</mat-label>
                <input
                  type="text"
                  matInput
                  formControlName="phoneNumber"
                  placeholder="Pl: 0670123456"
                />
              </mat-form-field>
              <div class="field" *ngIf="getControl.phoneNumber.touched">
                <p
                  *ngIf="getControl.phoneNumber.errors?.required"
                  class="errorLabel"
                >
                  Mező kitöltése kötelező.
                </p>
                <p
                  *ngIf="getControl.phoneNumber.errors?.pattern"
                  class="errorLabel"
                >
                  Nem megfelelő formátum.
                </p>
              </div>
            </div>
            <div>
              <mat-form-field class="field">
                <mat-label>Személyi igazolvány szám*</mat-label>
                <input
                  type="text"
                  matInput
                  formControlName="identityCardNumber"
                  placeholder="Pl: 123456AB"
                />
              </mat-form-field>
              <div class="field" *ngIf="getControl.identityCardNumber.touched">
                <p
                  *ngIf="getControl.identityCardNumber.errors?.required"
                  class="errorLabel"
                >
                  Mező kitöltése kötelező.
                </p>
              </div>
            </div>
            <div>
              <mat-form-field class="field">
                <mat-label>Anyja születési neve*</mat-label>
                <input
                  type="text"
                  matInput
                  formControlName="nameOfMother"
                  placeholder="Pl: Teszt Irén"
                />
              </mat-form-field>
              <div class="field" *ngIf="getControl.nameOfMother.touched">
                <p
                  *ngIf="getControl.nameOfMother.errors?.required"
                  class="errorLabel"
                >
                  Mező kitöltése kötelező.
                </p>
              </div>
            </div>
            <div>
              <mat-form-field class="field">
                <mat-label>Neme*</mat-label>
                <mat-select formControlName="genderId">
                  <mat-option [value]="null">Kérlek válassz...</mat-option>
                  <mat-option
                    *ngFor="let gender of genders"
                    [value]="gender.id"
                  >
                    {{ gender.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <div class="field" *ngIf="getControl.genderId.touched">
                <p
                  *ngIf="getControl.genderId.errors?.required"
                  class="errorLabel"
                >
                  Mező kitöltése kötelező.
                </p>
              </div>
            </div>
          </div>
          <div class="segment">
            <div>
              <mat-form-field class="field">
                <mat-label>Irányítószám*</mat-label>
                <input
                  type="text"
                  matInput
                  formControlName="postalCode"
                  placeholder="Pl: 4400"
                />
              </mat-form-field>
              <div class="field" *ngIf="getControl.postalCode.touched">
                <p
                  *ngIf="getControl.postalCode.errors?.required"
                  class="errorLabel"
                >
                  Mező kitöltése kötelező.
                </p>
                <p
                  *ngIf="getControl.postalCode.errors?.pattern"
                  class="errorLabel"
                >
                  Nem megfelelő formátum.
                </p>
              </div>
            </div>
            <div>
              <mat-form-field class="field">
                <mat-label>Város*</mat-label>
                <input
                  type="text"
                  matInput
                  formControlName="city"
                  placeholder="Pl: Nyíregyháza"
                />
              </mat-form-field>
              <div class="field" *ngIf="getControl.city.touched">
                <p *ngIf="getControl.city.errors?.required" class="errorLabel">
                  Mező kitöltése kötelező.
                </p>
              </div>
            </div>
            <div>
              <mat-form-field class="field">
                <mat-label>Cím*</mat-label>
                <input
                  type="text"
                  matInput
                  formControlName="address"
                  placeholder="Pl: Nagy Imre tér 1."
                />
              </mat-form-field>
              <div class="field" *ngIf="getControl.address.touched">
                <p
                  *ngIf="getControl.address.errors?.required"
                  class="errorLabel"
                >
                  Mező kitöltése kötelező.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="segmentBorder">
          <legend class="legendTitle">
            <mat-label color="primary">Céges adatok:</mat-label>
          </legend>
          <div class="segment">
            <div>
              <mat-form-field class="field">
                <mat-label>Beosztás*</mat-label>
                <mat-select formControlName="jobId">
                  <mat-option [value]="null">Kérlek válassz...</mat-option>
                  <mat-option
                    *ngFor="let job of jobs"
                    [value]="job.id"
                  >
                    {{ job.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <div class="field" *ngIf="getControl.jobId.touched">
                <p *ngIf="getControl.jobId.errors?.required" class="errorLabel">
                  Mező kitöltése kötelező.
                </p>
              </div>
            </div>
            <div>
              <mat-form-field class="field">
                <mat-label>Státusz*</mat-label>
                <mat-select formControlName="statusId">
                  <mat-option [value]="null">Kérlek válassz...</mat-option>
                  <mat-option
                    *ngFor="let status of statuses"
                    [value]="status.id"
                  >
                    {{ status.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <div class="field" *ngIf="getControl.statusId.touched">
                <p *ngIf="getControl.statusId.errors?.required" class="errorLabel">
                  Mező kitöltése kötelező.
                </p>
              </div>
            </div>
          </div>
          <div class="allowancesSegmentBorder">
            <legend class="legendTitle">
              <mat-label color="primary">Juttatások:</mat-label>
            </legend>
            <div class="segment allowanceSegment">
              <mat-form-field class="field">
                <mat-label>Juttatás neve*</mat-label>
                <mat-select formControlName="allowanceTypeForAdd">
                  <mat-option [value]="null">Kérlek válassz...</mat-option>
                  <mat-option
                    *ngFor="let allowance of allowanceTypes"
                    [value]="allowance.id"
                  >
                    {{ allowance.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field class="field">
                <mat-label>Juttatás értéke*</mat-label>
                <input
                  type="text"
                  formControlName="allowanceValueForAdd"
                  matInput
                  placeholder="Pl: 50000"
                />
              </mat-form-field>
              <button
                mat-mini-fab
                color="accent"
                class="allowanceButton"
                matTooltip="Juttatás hozzáadása"
                (click)="addAllowance()"
              >
                <mat-icon>add_circle</mat-icon>
              </button>
            </div>
            <hr />
            <table
              #table
              mat-table
              [dataSource]="addedAllowanceTypes"
              *ngIf="this.addedAllowanceTypes.length > 0"
              class="mat-elevation-z8 allowanceTable"
            >
              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef>Juttatás neve</th>
                <td mat-cell *matCellDef="let element">{{ element.name }}</td>
              </ng-container>

              <ng-container matColumnDef="value">
                <th mat-header-cell *matHeaderCellDef>Juttatás értéke</th>
                <td mat-cell *matCellDef="let element">
                  {{ element.value }}
                </td>
              </ng-container>

              <ng-container
                matColumnDef="deleteColumn"
                class="tableButtonColumn"
              >
                <th mat-header-cell *matHeaderCellDef></th>
                <td
                  mat-cell
                  *matCellDef="let element"
                  class="tableButtonColumn"
                >
                  <button
                    mat-raised-button
                    color="warn"
                    matTooltip="Juttatás törlése"
                    (click)="deleteAllowance(element)"
                  >
                    <mat-icon>delete</mat-icon>
                  </button>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            </table>
            <div
              *ngIf="submitted && !addedAllowancesIsNotNull"
              class="allowanceErrorDiv"
            >
              <p class="errorLabel">Legalább egy juttatás megadása kötelező.</p>
            </div>
          </div>
        </div>
      </form>
    </div>
  </mat-dialog-content>
  <mat-dialog-actions>
    <button mat-raised-button color="primary" (click)="addEmployee()" matTooltip="Munkavállaló hozzáadása">
      <mat-icon>check</mat-icon>
    </button>
    <button mat-raised-button color="accent" mat-dialog-close matTooltip="Bezárás">
      <mat-icon>close</mat-icon>
    </button>
  </mat-dialog-actions>
</div>
